[% SET title = form.title ~%]
[% PROCESS 'waste/header.html' %]

[% PROCESS 'govuk/fields.html' %]
[% PROCESS back %]
[% PROCESS errors %]
[% PROCESS title %]
[% IF property %]
  [% INCLUDE 'waste/_address_display.html' %]
[% END %]

<form id="item-selection-form" class="waste" method="post" enctype="multipart/form-data">
  [% FOR num IN [ 1 .. form.MAX_ITEMS ] %]
  <div class="bulky-item-wrapper">
    [% # Building names beforehand because override_fields does not seem to like them being built inside its arg list %]
    [% base_field = 'item_' _ num %]
    [% item = base_field _ '.item' %]
    [% photo = base_field _ '.photo' %]
    [% photo_fileid = base_field _ '.photo_fileid' %]
    [% PROCESS form override_fields = [ item, photo, photo_fileid ] %]

    <button type="button" class="delete-item btn-secondary govuk-!-margin-bottom-3">Delete item</button>

    [% PROCESS extra_text num = num %]
    <hr>
  </div>
  [% END %]
  <button type="button" id="add-new-item" class="btn-secondary govuk-!-margin-bottom-3">+ Add item</button>
  [% PROCESS form override_fields = [ 'continue', 'saved_data', 'token', 'process', 'unique_id' ] %]
</form>

[% # Only shown if JS disabled %]
[% BLOCK extra_text %]
<div class="govuk-warning-text due bulky-item-message">
  <div class="govuk-warning-text__img">
    <span class="govuk-warning-text__icon" aria-hidden="true">i</span>
  </div>
  <div class="govuk-warning-text__content">
    <span class="item-name"></span>
    <span class="govuk-warning-text__assistive">Important information</span>
    <p id="item-message" class="govuk-!-margin-bottom-0"></p>
  </div>
</div>
[% END %]

[% INCLUDE footer.html %]
